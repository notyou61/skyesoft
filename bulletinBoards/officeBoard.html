
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Office Electronic Bulletin Board</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
    }
    .board-section {
      width: 90vw;
      max-width: 1200px;
      background: #ffffff;
      margin: 12px auto;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      padding: 16px;
    }
    .cardBody {
      overflow-y: auto;
      max-height: 400px;
    }
    .entry {
      font-size: 1.1em;
      padding: 4px 0;
    }
  </style>
</head>
<body>
  <div class="board-section" id="pageBody">
    <div id="bodyHeader">üìã Active Permits</div>
    <div class="cardBody">
      <div class='entry'>Permit #1 ‚Ä¢ $500 ‚úî Ready</div>
      <div class='entry'>Permit #2 ‚Ä¢ $400 ‚úî Ready</div>
      <div class='entry'>Permit #3 ‚Ä¢ $300 ‚úî Ready</div>
      <!-- Add many more entries here to test scroll -->
    </div>
    <div id="bodyFooter">Updated: 05/07/2025</div>
  </div>

  <script>
let currentCardIndex = 0;
let cardTimer = null;

function log(...args) {
  console.log(`[${new Date().toLocaleTimeString()}]`, ...args);
}

function smoothScrollCardBody() {
  const cardBody = document.querySelector('.cardBody');
  if (!cardBody) {
    log("‚ùå .cardBody not found");
    return;
  }

  cardBody.scrollTop = 0;
  const scrollHeight = cardBody.scrollHeight - cardBody.clientHeight;
  if (scrollHeight <= 0) {
    log("‚ÑπÔ∏è No scroll required. Content fits.");
    return;
  }

  const duration = 60000;
  const start = performance.now();
  log("‚úÖ Starting smooth scroll. Total distance:", scrollHeight);

  function step(timestamp) {
    const elapsed = timestamp - start;
    const progress = Math.min(elapsed / duration, 1);
    cardBody.scrollTop = scrollHeight * progress;
    if (progress < 1) requestAnimationFrame(step);
  }

  requestAnimationFrame(step);
}

function populateCard({ header, body, footer }) {
  document.getElementById("bodyHeader").innerHTML = header || "";
  document.querySelector(".cardBody").innerHTML = body || "";
  document.getElementById("bodyFooter").innerHTML = footer || "";
}

const cards = [
  {
    header: "üìã Active Permits",
    body: document.querySelector(".cardBody").innerHTML,
    footer: "Updated: 05/07/2025"
  },
  {
    header: "üìà KPI Dashboard",
    body: "<div class='entry'>üõ†Ô∏è Open Tasks: 12</div><div class='entry'>‚úÖ Completed Today: 47</div>",
    footer: "Updated: 05/07/2025"
  }
];

function rotateCards() {
  log("üîÅ rotateCards() called. Current index:", currentCardIndex);
  clearTimeout(cardTimer);
  log("‚è±Ô∏è Cleared previous cardTimer");

  populateCard(cards[currentCardIndex]);
  log("üì¶ Populated card index:", currentCardIndex);

  if (currentCardIndex === 0) {
    log("üïí Major card - setting timer for 60 seconds");
    setTimeout(smoothScrollCardBody, 500);
    cardTimer = setTimeout(() => {
      log("üîÑ Timeout hit: moving to next card (after 60s)");
      rotateCards();
    }, 60000);
  } else {
    log("üïí Minor card - setting timer for 15 seconds");
    cardTimer = setTimeout(() => {
      log("üîÑ Timeout hit: moving to next card (after 15s)");
      rotateCards();
    }, 15000);
  }

  log("üìå Timer set. Next card will trigger in", currentCardIndex === 0 ? "60s" : "15s");
  currentCardIndex = (currentCardIndex + 1) % cards.length;
}

window.onload = () => {
  log("üöÄ Page loaded. Starting card rotation...");
  rotateCards();
};
</script>

<!-- version v2025.05.07.0050 confirmed -->
</body>
</html>

<!-- confirmed 0050 purge fix -->
