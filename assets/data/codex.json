{
  "meta": {
    "title": { "icon": 58, "text": "Skyesoft Codex Meta" },
    "version": "1.0.0",
    "purpose": {
      "icon": 6,
      "text": "Defines what the Codex is, how it governs Skyesoft, and how AI interacts with human-approved doctrine."
    },
    "preamble": {
      "title": { "icon": 58, "text": "Preamble — Governance Purpose of the Codex" },
      "text": "The Skyesoft Codex is the governance manual for the system. It tells Skyesoft how to read what comes in, how to decide what should happen next, and how to keep every action within approved bounds. By following the Codex, all parts of the system make decisions the same way, for the same reasons, with no hidden rules."
    },
    "principles": {
      "codexAsInstruction": {
        "title": { "icon": 6, "text": "Meta Principle — The Codex as Instruction" },
        "text": "Skyesoft is codex-driven. The SSE provides real-time data, but the Codex defines how modules interpret and present that data."
      },
      "dataVsInstruction": {
        "title": { "icon": 6, "text": "Meta Principle — Data vs. Instruction" },
        "text": "The SSE provides real-time facts. The Codex defines how facts are used. This separation preserves clarity and safety."
      },
      "aiAugmentation": {
        "title": { "icon": 6, "text": "Meta Principle — AI Augmentation" },
        "text": "AI may recommend, summarize, validate, and detect inconsistencies—but may not create binding rules or alter Codex doctrine."
      },
      "singleSourceOfTruth": {
        "title": { "icon": 20, "text": "Meta Principle — Single Source of Truth" },
        "text": "All rules, formatting, and interpretation logic must reside in the Codex. Chat logs, comments, or scripts cannot establish policy."
      },
      "iconMapping": {
        "title": { "icon": 1, "text": "Meta Principle — Icon Mapping" },
        "text": "All Codex objects must reference icons by numeric ID from iconMap.json. Emoji literals or PNG names are prohibited."
      },
      "tierHierarchy": {
        "title": { "icon": 7, "text": "Meta Principle — Four-Tier Hierarchy" },
        "text": "The Codex is structured into: Tier 0 Meta, Tier 1 Constitution, Tier 2 Standards, Tier 3 Modules. Tier 2 Standards reside under the 'standards' object; Tier 3 Modules under the 'modules' object."
      },
      "structuralConsistency": {
        "title": { "icon": 7, "text": "Meta Principle — Structural Consistency" },
        "text": "All Codex-defined structures—icons, keys, schema rules, and tier relationships—must be interpreted exactly as defined. This applies to documents, modules, SSE data, AI actions, and all system outputs."
      },
      "renderSpacingStandard": {
        "title": { "icon": 20, "text": "Meta Principle — Rendering Spacing Standard" },
        "text": "All Codex text blocks are authored as single-spaced. Render engines must preserve single-spacing unless a Standard explicitly requires otherwise."
      },
      "beginWithTheEndInMind": {
        "title": { "icon": 6, "text": "Meta Principle — Begin With the End in Mind" },
        "text": "All Codex design, AI behavior, and system development must start from the intended final outcome—accurate documents, reliable operations, and consistent user experience. Every rule and structure must be created with the real-world end-use in mind, ensuring stability, clarity, and long-term maintainability."
      },
      "continuousImprovement": {
        "title": { "icon": 6, "text": "Meta Principle — Continuous Improvement" },
        "text": "Skyesoft evolves through deliberate refinement. AI may propose optimizations, but any structural improvement requires human approval and Codex-aligned revision."
      },
      "metaSupremacy": {
        "title": { "icon": 58, "text": "Meta Principle — Primacy of the Meta Layer" },
        "text": "The Meta tier defines the foundation of Skyesoft. Nothing in any other tier may contradict the principles set here. All Standards, Modules, and system behavior must follow the Meta rules first."
      },
      "versionParliament": {
        "title": { "icon": 58, "text": "Meta Principle — Version Parliament" },
        "text": "Version Parliament is the adjudicating extension of the Parliamentarian for versioning. No version change is valid without: (1) Detected structural change, (2) Parliamentarian validation, (3) Archivist recording. It operates under Meta Supremacy."
      }
    }
  },
  "constitution": {
    "title": { "icon": 58, "text": "Skyesoft Codex Constitution" },
    "version": "1.0.0",
    "ratifiedBy": "Parliamentarian",
    "preamble": {
      "title": { "icon": 58, "text": "Preamble — Purpose of the Constitution" },
      "text": "This Constitution sets the rules that keep Skyesoft running the same way every time. It creates a clear system for how decisions are made, who approves changes, and how work stays consistent across every part of the platform. The goal is simple: reduce confusion, remove guesswork, and give Skyesoft a stable foundation that anyone can follow and trust."
    },
    "articles": {
      "humanAuthority": {
        "articleNum": "1",
        "title": { "icon": 58, "text": "Article I — Human Authority" },
        "text": "Skyesoft is governed by humans. AI may assist but may not legislate. All changes require explicit human approval."
      },
      "codexIsLaw": {
        "articleNum": "2",
        "title": { "icon": 58, "text": "Article II — The Codex as Law" },
        "text": "The Codex governs all Skyesoft behavior. When code and Codex disagree, the Codex prevails."
      },
      "systemGovernance": {
        "articleNum": "3",
        "title": { "icon": 58, "text": "Article III — Standards Govern Modules" },
        "text": "Tier 2 Standards define rules. Tier 3 Modules must follow them and cannot override them."
      },
      "consistencyDoctrine": {
        "articleNum": "4",
        "title": { "icon": 58, "text": "Article IV — Consistency and Uniformity" },
        "text": "All Skyesoft documents and system behaviors must follow shared visual, structural, and procedural standards."
      },
      "parliamentarianAuthority": {
        "articleNum": "5",
        "title": { "icon": 58, "text": "Article V — Parliamentarian Authority" },
        "text": "The Parliamentarian interprets the Codex and resolves contradictions. Rulings clarify doctrine unless marked as amendments."
      },
      "archivistRole": {
        "articleNum": "6",
        "title": { "icon": 58, "text": "Article VI — The Archivist" },
        "text": "The Archivist records amendments and rulings. No rule is valid unless archived."
      },
      "sseDoctrine": {
        "articleNum": "7",
        "title": { "icon": 58, "text": "Article VII — Real-Time Data Doctrine" },
        "text": "All live data must originate from the SSE stream. Modules may not invent timestamps, weather, or time states."
      },
      "noShadowRules": {
        "articleNum": "8",
        "title": { "icon": 58, "text": "Article VIII — No Shadow Rules" },
        "text": "Policies cannot exist outside the Codex. Chat conversations, emails, or code comments do not create rules."
      },
      "safeOperation": {
        "articleNum": "9",
        "title": { "icon": 58, "text": "Article IX — Safety & Operational Integrity" },
        "text": "All system behaviors must align with real operational needs. Solutions must be practical, reliable, and suitable for everyday use. Overly academic or untested ideas are prohibited."
      },
      "amendmentProcess": {
        "articleNum": "10",
        "title": { "icon": 58, "text": "Article X — Amendment Procedure" },
        "text": "Amendments require: (1) Proposal, (2) Parliamentarian Review, (3) Human Approval, (4) Archivist Recording."
      },
      "automationLimits": {
        "articleNum": "11",
        "title": { "icon": 58, "text": "Article XI — Limits of Automation" },
        "text": "No automated process, scheduled task, cron job, AI action, or system module may alter, extend, override, reinterpret, or nullify Codex doctrine. Automation may assist the Codex but cannot legislate. All doctrinal changes must follow the amendment process defined in Article X."
      },
      "automationReview": {
        "articleNum": "12",
        "title": { "icon": 58, "text": "Article XII — Automated Review & Proposal Discovery" },
        "text": "The system may automatically scan the repository, documents, data structures, and module outputs to identify inconsistencies, drift, or emerging patterns that may warrant doctrinal clarification. These automated findings may be presented as suggested proposals but possess no authority. Only humans may adopt or advance a proposal into the amendment process defined in Article X."
      }
    },
    "roles": {
      "parliamentarian": {
        "title": { "icon": 6, "text": "Parliamentarian" },
        "description": "The Parliamentarian is the Codex’s internal judicial function. It interprets doctrine, validates amendments, governs hierarchical order, and determines whether system actions comply with constitutional rules. The Parliamentarian does not exist as a person or external authority; it is a formal role defined within the Codex."
      },
      "archivist": {
        "title": { "icon": 21, "text": "Archivist" },
        "description": "The Archivist is the record-keeping function of the Codex. It maintains lineage, historical logs, amendment tracking, document registries, repository audits, and all codified system metadata. The Archivist does not exist as an individual; it is a constitutional role operating within the Codex."
      },
      "executor": {
        "title": { "icon": 10, "text": "Executor" },
        "description": "The Executor carries out operational actions mandated by the Codex, such as scheduled tasks, audits, validations, and system-wide updates. It performs these actions strictly within the constraints defined by the Parliamentarian."
      },
      "custodian": {
        "title": { "icon": 7, "text": "Custodian" },
        "description": "The Custodian protects the structural and doctrinal purity of the system. It validates Codex documents, ensures schema integrity, and prevents corruption or unauthorized modification of foundational files."
      }
    }
  },
  "standards": {
    "framework": {
      "title": { "icon": 7, "text": "Skyesoft Standards Framework" },
      "version": "1.0.0",
      "preamble": {
        "title": { "icon": 7, "text": "Preamble — Purpose of the Standards Layer" },
        "text": "Tier 2 Standards give structure to the Constitution by setting clear rules for how Skyesoft operates from day to day. They define the boundaries within which all modules must work—how documents are formed, how information is handled, and how decisions remain steady and predictable. Standards do not create features; they create order. By giving every part of the platform the same rules to follow, this layer keeps Skyesoft consistent, dependable, and governed."
      },
      "purpose": {
        "icon": 20,
        "text": "The Standards Framework establishes the governing space for all Tier 2 rules. It defines how Standards must be organized, interpreted, and enforced, ensuring every Standard supports constitutional authority and maintains system-wide uniformity."
      }
    },
    "items": {      
      "documentStandards": {
        "title": { "icon": 20, "text": "Document Standards" },
        "type": "directive",
        "tier": 2,
        "hierarchyOrder": "A",
        "governs": [
          "documentTypesRegistry",
          "metaFooterInformationSheet",
          "visualRequirementClause",
          "referentialDocumentRecord"
        ],
        "dependsOn": ["constitution"],
        "purpose": {
          "icon": 63,
          "text": "Defines the uniform structure, layout, spacing, and labeling rules for all Skyesoft documents, including reports, surveys, audits, and information sheets. Ensures every document produced by Skyesoft shares a consistent professional appearance."
        },
        "repository": {
          "title": { "icon": 24, "text": "Skyesoft Documents Repository" },
          "path": "/documents/",
          "classification": "Unified Output Layer",
          "purpose": "All generated PDFs and sheets must be stored within /documents. This ensures accurate indexing, version tracking, and archival continuity.",
          "notes": "Replaces scattered document locations used before Codex v5.5.x."
        },
        "containedModules": {
          "metaFooterInformationSheet": {
            "title": { "icon": 2, "text": "Meta Footer — Information Sheet Doctrine" },
            "type": "metaSection",
            "tier": 2,
            "hierarchyOrder": "A-1",
            "issuedBy": "Parliamentarian",
            "appliesTo": ["informationSheet"],
            "description": "Defines the meta footer that must appear on all Information Sheet documents.",
            "format": "text",
            "text": "Doctrine Source: {moduleAbbrev} • Codex {codexVersion} • Amendments {amendmentList} • Reviewed by {reviewer} ({reviewDate})",
            "variables": {
              "moduleAbbrev": "Short code identifying the originating module (e.g., TIS).",
              "codexVersion": "Codex version in effect at time of generation.",
              "amendmentList": "Comma-separated amendments that affect the document.",
              "reviewer": "Name of the reviewer or validating entity.",
              "reviewDate": "Date of the formal review."
            }
          },
          "visualRequirementClause": {
            "title": { "icon": 68, "text": "Visual Requirement Clause" },
            "type": "directive",
            "tier": 2,
            "hierarchyOrder": "A-2-VRC",
            "issuedBy": "Parliamentarian",
            "description": "Requires all document sections to declare both an icon and a contentFormat. This enables consistent rendering across PDF, HTML, and dashboard display.",
            "format": "table",
            "table": [
              { "key": "text", "display": "Paragraph Block", "description": "Standard narrative content.", "icon": 17 },
              { "key": "list", "display": "List", "description": "Ordered or unordered bullet items.", "icon": 27 },
              { "key": "table", "display": "Tabular Data", "description": "Columns and rows for structured info.", "icon": 11 },
              { "key": "dynamic", "display": "Live Data Feed", "description": "SSE or API-sourced content.", "icon": 52 },
              { "key": "other", "display": "Custom Content", "description": "Diagrams, media, or special formats.", "icon": 12 }
            ],
            "governs": ["renderDirectives"],
            "enforcement": {
              "rules": [
                "All sections must include an icon ID.",
                "All sections must include a contentFormat key.",
                "Each object becomes a visible document section.",
                "Section headers must display the icon.",
                "Missing fields constitute a formatting violation."
              ],
              "violationCode": "CP-DOC-2025-A1"
            }
          },
          "referentialDocumentRecord": {
            "title": { "icon": 37, "text": "Referential Document Record Framework" },
            "type": "registry",
            "tier": 2,
            "hierarchyOrder": "A-3",
            "issuedBy": "Parliamentarian",
            "description": "Defines the JSON registry schema that links each produced document to its metadata, responsible user, and archival lineage.",
            "framework": {
              "baseSchema": {
                "required": [
                  "actionID", "slug", "title", "type",
                  "fileName", "createdBy", "generatedAt",
                  "generatedBy", "codexVersion"
                ],
                "optional": [
                  "entity", "workOrder", "inspectionID",
                  "auditScope", "governingClause",
                  "attachments", "notes"
                ]
              },
              "storage": {
                "path": "/assets/data/documentIndex.json",
                "format": "json",
                "mode": "append",
                "notes": "Serves as the document index used by all modules. SQL adoption, if desired, must be introduced through the amendment process."
              },
              "repository": {
                "path": "/documents/",
                "classification": "Unified Output Layer",
                "purpose": "Central storage location for all referenced PDFs."
              }
            }
          }
        },
        "documentTypesRegistry": {
          "title": { "icon": 24, "text": "Document Types Registry" },
          "type": "registry",
          "tier": 2,
          "hierarchyOrder": "A-2",
          "issuedBy": "Parliamentarian",
          "description": "Defines the official types used for document classification across Skyesoft.",
          "format": "table",
          "items": [
            { "key": "directive", "type": "directive", "purpose": "Governing rules.", "headerExample": "Time Interval Standards Directive" },
            { "key": "audit", "type": "audit", "purpose": "Governance reviews.", "headerExample": "Temporal Integrity Audit" },
            { "key": "report", "type": "report", "purpose": "Analytical summaries.", "headerExample": "Permit Fee Report" },
            { "key": "survey", "type": "survey", "purpose": "Field observations.", "headerExample": "Photo Survey" },
            { "key": "bulletin", "type": "bulletin", "purpose": "Advisories and notices.", "headerExample": "Safety Bulletin" },
            { "key": "incident", "type": "incident", "purpose": "Service or malfunction records.", "headerExample": "Service Incident Report" },
            { "key": "specification", "type": "specification", "purpose": "Technical definitions.", "headerExample": "Fabrication Specification" },
            { "key": "record", "type": "record", "purpose": "Archival logs.", "headerExample": "Codex Amendment Record" },
            { "key": "sheet", "type": "sheet", "purpose": "Reference documents.", "headerExample": "Information Sheet" },
            { "key": "request", "type": "request", "purpose": "Initiating action or approval processes.", "headerExample": "Work Order Request" },
            { "key": "registry", "type": "registry", "purpose": "Indexing systems.", "headerExample": "Document Index Register" }
          ],
          "notes": "Taxonomy and Summary types deprecated by CP-DOC-2025-A1."
        }
      },
      "documentCatalog": {
        "title": { "icon": 21, "text": "Document Catalog" },
        "type": "registry",
        "tier": 2,
        "hierarchyOrder": "A-4",
        "issuedBy": "Parliamentarian",
        "description": "Defines the official catalog of document outputs produced within Skyesoft. Each entry identifies purpose, classification type, and canonical header text.",
        "format": "table",
        "items": [
          { "key": "photoSurvey", "name": "Photo Survey", "type": "survey", "purpose": "Field observations with photographic documentation.", "headerExample": "Photo Survey" },
          { "key": "permitFeeReport", "name": "Permit Fee Report", "type": "report", "purpose": "Breakdown of permit costs, review fees, and engineering fees.", "headerExample": "Permit Fee Report" },
          { "key": "workOrderRequest", "name": "Work Order Request", "type": "request", "purpose": "Initiates fabrication, installation, or administrative tasks.", "headerExample": "Work Order Request" },
          { "key": "siteInspectionReport", "name": "Site Inspection Report", "type": "report", "purpose": "Observations, measurements, and compliance outcomes at a job site.", "headerExample": "Site Inspection Report" },
          { "key": "installationSummary", "name": "Installation Summary", "type": "report", "purpose": "Final installation outcomes including materials, validations, and completion notes.", "headerExample": "Installation Summary" },
          { "key": "complianceAudit", "name": "Compliance Audit", "type": "audit", "purpose": "Evaluation of regulatory, ordinance, and internal compliance.", "headerExample": "Compliance Audit" },
          { "key": "internalMemo", "name": "Internal Memo", "type": "directive", "purpose": "Internal instructions, clarifications, or policy updates.", "headerExample": "Internal Memo" },
          { "key": "informationSheet", "name": "Information Sheet", "type": "sheet", "purpose": "Summary reference document.", "headerExample": "Information Sheet" },
          { "key": "projectOverview", "name": "Project Overview", "type": "report", "purpose": "High-level description of a project, scope, contacts, and location.", "headerExample": "Project Overview" },
          { "key": "safetyBulletin", "name": "Safety Bulletin", "type": "bulletin", "purpose": "Advisories concerning safety risks and protocols.", "headerExample": "Safety Bulletin" },
          { "key": "fabricationSpecification", "name": "Fabrication Specification", "type": "specification", "purpose": "Technical dimensions, definitions, and materials.", "headerExample": "Fabrication Specification" },
          { "key": "incidentReport", "name": "Incident Report", "type": "incident", "purpose": "Record of noteworthy events or service incidents.", "headerExample": "Incident Report" }
        ],
        "notes": "Defines the canonical document set for Skyesoft and governs all future template expansion."
      },
      "sse": {
        "title": { "icon": 52, "text": "SSE Standards" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-1",
        "description": "Defines the official structure, ordering, membership, and governance rules for the Skyesoft SSE Stream. This standard ensures that all live data emitted by Skyesoft is deterministic, predictable, and fully Codex-controlled.",
        "dataSource": {
          "title": { "icon": 52, "text": "SSE Runtime Data Source" },
          "text": "All non-doctrinal runtime inputs required by the SSE Stream must reside in sseInputs.json. This includes office hours, shop hours, default weather location, geographic coordinates, default sunrise/sunset, and interval label definitions. These are operational inputs — not configuration — and must never include rules, policies, or standards belonging to the Codex.",
          "file": "assets/data/sseInputs.json"
        },
        "preamble": {
          "title": { "icon": 52, "text": "Preamble — Purpose of the SSE Stream" },
          "text": "The SSE Stream is Skyesoft’s live operational output — the real-time heartbeat of the system. It provides current time/date state, work interval calculations, weather data, holiday logic, record counts, and Codex context. The Codex defines the structural and ordering rules; sseInputs.json supplies the runtime values needed to compute the output."
        },
        "purpose": {
          "icon": 52,
          "text": "To guarantee that the SSE Stream remains uniform, deterministic, and governed across the entire Skyesoft ecosystem, eliminating drift and ensuring all consuming modules operate on the same structured live data."
        },
        "tiers": {
          "core": {
            "title": { "icon": 52, "text": "Tier 1 — Core Live State" },
            "members": [
              "timeDateArray",
              "intervalsArray",
              "weatherData",
              "holidays",
              "recordCounts"
            ]
          },
          "ui": {
            "title": { "icon": 10, "text": "Tier 2 — User Interaction Layer" },
            "members": [
              "uiEvent",
              "announcements",
              "siteMeta"
            ]
          },
          "system": {
            "title": { "icon": 6, "text": "Tier 3 — System Context & Governance" },
            "members": [
              "codexContext"
            ]
          }
        },
        "rules": {
          "icon": 20,
          "text": "All SSE output must conform to the Codex-defined tier map and follow strict ordering rules. No module may introduce or remove fields without Codex ratification.",
          "enforcement": [
            "All SSE members must appear in tier order: core → ui → system.",
            "Any missing member must be emitted as an empty object — never omitted.",
            "New SSE members require Codex approval and must specify a tier.",
            "All runtime inputs (hours, labels, location, coordinates, daybreak values) must be loaded exclusively from sseInputs.json.",
            "The Codex cannot duplicate, override, or redefine any sseInputs.json value.",
            "PHP scripts must never introduce fields outside the tier map.",
            "SSE.system.codexContext must embed: { \"codexVersion\": \"...\", \"moduleVersions\": { ... }, \"systemVersion\": \"...\", \"gitHash\": \"...\" }. Sourced exclusively from assets/data/versions.json. No hardcoding."
          ]
        }
      },
      "unifiedClientArchitecture": {
        "title": { "icon": 7, "text": "Unified Client Architecture Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-8",
        "description": "Defines the governing architecture for all Skyesoft UI pages, ensuring shared modules, consistent behavior, and declarative markup across the portal.",
        "rules": [
          "All HTML pages must be declarative only, containing no inline JavaScript.",
          "All dynamic behavior must be implemented using shared JavaScript modules.",
          "A single front-end controller (app.js) must manage global state, SSE ingest, login, modal logic, and UI dispatch.",
          "Weather, DataTables, and Skyebot logic must remain modular and isolated from markup.",
          "New UI pages must automatically inherit architecture without modifying core modules."
        ],
        "sharedModules": [
          "app.js",
          "sse.js",
          "ui.js",
          "weather.js"
        ],
        "pageSpecificModules": {
          "index": ["skyebot.js"],
          "board": ["dataTablesSupport.js"]
        },
        "pageDetection": {
          "attribute": "data-page",
          "values": ["index", "officeBoard", "board-*"]
        },
        "compliance": {
          "test": "Load index.html and officeBoard.html under live SSE with no console errors, identical timing logic, and Codex-compliant modal activation.",
          "violationCode": "CP-UI-2025-A1"
        }
      },
      "repositoryStandard": {
        "title": { "icon": 67, "text": "Repository Standard" },
        "tier": 2,
        "hierarchyOrder": 9,
        "type": "Structural Standard",
        "preamble": {
          "icon": 0,
          "text": "The Repository Standard defines the canonical structure of the Skyesoft system. All folders, files, and architectural groupings exist to support the Codex, the SSE, the unified UI architecture, and Skyebot. Uniformity of structure prevents drift, enforces governance, and ensures that all modules, scripts, and documents operate under a single, predictable architecture. This standard guarantees that Skyesoft remains maintainable, extensible, and aligned with Codex doctrine. No file or directory may exist outside this structure without explicit Codex authorization."
        },
        "purpose": {
          "icon": 6,
          "text": "Ensure a consistent, Codex-governed layout for all Skyesoft components; prevent architectural drift; define the mandatory placement of all files; and maintain long-term project integrity."
        },
        "directives": [
          "All files must reside within the directories defined in this standard.",
          "No new top-level directories may be introduced without Codex amendment.",
          "Directory purpose must remain narrow, focused, and consistent with Codex doctrine.",
          "Executable logic must be placed only in approved execution directories (api/, assets/js/, modules/, scripts/).",
          "The repository layout must remain stable across all environments (Home, Office, Server, Deployment).",
          "Git pushes may activate a Repository Event Hook via api/cron-run.php. Allowed actions: Log trigger (time, branch, hash, IP); Run version sync; No writes to Codex files.",
          "Hook logs must follow: { \"hookTriggered\": true, \"branch\": \"...\", \"commitHash\": \"...\", \"remoteIP\": \"...\" } (stored in /reports/automation/hooks.json)."
        ],
        "rules": {
          "allowedRoots": [
            "codex/",
            "assets/",
            "api/",
            "documents/",
            "reports/",
            "bulletinBoards/",
            "scripts/",
            "modules/"
          ],
          "disallowed": [
            "No runtime files may be stored in root.",
            "No business logic may be stored inside codex/.",
            "No UI code may appear in api/.",
            "No server-side code may appear in assets/.",
            "No temporary or experimental directories may be added without Codex approval."
          ]
        },
        "directories": {
          "...": "*(unchanged — directory definitions remain as previously provided)*"
        },
        "filesystemSchema": {
          "title": { "icon": 67, "text": "Filesystem Schema Directive" },
          "type": "structuralSchema",
          "tier": 2,
          "hierarchyOrder": "B-9-FS",
          "description": "Defines the mandatory Skyesoft directory tree, required files, allowed file types, depth limits, and canonical placement rules for all system assets. This schema is the authoritative map used by the System Automation Module to detect drift, orphaned files, missing components, and structural violations.",
          "rules": {
            "maxDepth": 3,
            "allowedExtensions": {
              "php": ["api", "modules", "scripts"],
              "js": ["assets/js", "modules"],
              "css": ["assets/css"],
              "json": ["assets/data", "codex"],
              "html": ["bulletinBoards", "documents/templates"],
              "pdf": ["documents"],
              "txt": ["assets/data"],
              "md": ["codex/docs"]
            },
            "prohibitedExtensions": [".tmp", ".bak", ".log", ".old", ".zip", ".rar"],
            "enforcement": [
              "All directories must match the canonical tree.",
              "No new top-level directories may be introduced without a Codex amendment.",
              "Files must appear only in approved directories for their extension.",
              "Empty directories are prohibited unless explicitly declared as containers.",
              "All required files must exist unless a Codex amendment states otherwise.",
              "No module, script, or cron task may create files outside registered paths."
            ]
          },
          "root": {
            "allowedRoots": [
              "codex/",
              "assets/",
              "api/",
              "documents/",
              "reports/",
              "bulletinBoards/",
              "scripts/",
              "modules/"
            ],
            "requiredFiles": [
              "codex/codex.json",
              "codex/iconMap.json"
            ],
            "prohibited": [
              "No runtime files in root.",
              "No PHP in root.",
              "No JS in root.",
              "No temporary dev folders (test/, tmp/, sandbox/, old/)."
            ]
          },
          "directoryTree": {
            "codex": {
              "required": true,
              "purpose": "Contains the Skyesoft Codex and related metadata.",
              "children": {
                "docs": {
                  "required": true,
                  "purpose": "Internal governance documents (MTCO, LGBAS, glossary, constitutional notes).",
                  "allowedExtensions": ["md", "json"]
                }
              },
              "requiredFiles": [
                "codex.json",
                "iconMap.json"
              ]
            },
            "assets": {
              "required": true,
              "purpose": "Static assets for UI, data, styles, and client behavior.",
              "children": {
                "css": {
                  "purpose": "Unified Skyesoft UI styles.",
                  "allowedExtensions": ["css"],
                  "requiredFiles": ["skyesoft-ui.css"]
                },
                "js": {
                  "purpose": "Shared front-end modules.",
                  "allowedExtensions": ["js"],
                  "requiredFiles": ["app.js", "sse.js", "ui.js", "weather.js"]
                },
                "data": {
                  "purpose": "Non-doctrinal runtime data sources.",
                  "allowedExtensions": ["json"],
                  "requiredFiles": [
                    "sseInputs.json",
                    "documentIndex.json"
                  ]
                },
                "images": {
                  "purpose": "Logos, icons, and document graphics.",
                  "allowedExtensions": ["png", "jpg", "svg"]
                }
              }
            },
            "api": {
              "required": true,
              "purpose": "Server-side PHP logic for Skyebot, SSE, data fetch, and runtime actions.",
              "allowedExtensions": ["php"],
              "requiredFiles": [
                "getDynamicData.php",
                "askOpenAI.php",
                "getWeather.php"
              ]
            },
            "documents": {
              "required": true,
              "purpose": "Canonical output layer for generated PDF/HTML documents.",
              "children": {
                "templates": {
                  "purpose": "HTML templates used by modules to generate reports and surveys.",
                  "allowedExtensions": ["html"],
                  "requiredFiles": [
                    "permitFeeReportTemplate.html",
                    "photoSurveyTemplate.html",
                    "workOrderRequestTemplate.html"
                  ]
                }
              },
              "allowedExtensions": ["pdf", "html"]
            },
            "reports": {
              "required": true,
              "purpose": "System-generated JSON/PDF reports including audits, automation outputs, and SSE integrity checks.",
              "children": {
                "automation": {
                  "purpose": "Cron-generated structural and doctrinal audit files.",
                  "allowedExtensions": ["json"],
                  "requiredFiles": [
                    "dailyRepositoryAudit.json",
                    "sseIntegrity.json",
                    "proposals.json"
                  ]
                }
              }
            },
            "bulletinBoards": {
              "required": true,
              "purpose": "Dynamic and static HTML boards for office, operations, and dashboard content.",
              "allowedExtensions": ["html"],
              "children": {
                "sandbox": {
                  "purpose": "Development sandbox for UI testing (Codex-governed).",
                  "allowedExtensions": ["html", "js", "json"],
                  "requiredFiles": ["officeBoardSandbox.html"]
                }
              }
            },
            "scripts": {
              "required": true,
              "purpose": "Maintenance, indexing, rollover, and temporal testing utilities.",
              "allowedExtensions": ["php", "js"],
              "requiredFiles": [
                "holidayRolloverTester.php",
                "buildDocumentIndex.php"
              ]
            },
            "modules": {
              "required": true,
              "purpose": "Tier 3 functional logic (report generators, AI behavior, SSE utilities).",
              "children": {
                "tis": {
                  "purpose": "Time Interval Standards implementation.",
                  "allowedExtensions": ["php", "json"],
                  "requiredFiles": ["tisCore.php", "tisSchema.json"]
                },
                "skyebot": {
                  "purpose": "Conversational engine logic.",
                  "allowedExtensions": ["php", "js"],
                  "requiredFiles": ["skyebot.js", "intentRouter.php", "contextManager.php"]
                },
                "reports": {
                  "purpose": "Permit Fee Reports, Photo Surveys, and other document-producing modules.",
                  "allowedExtensions": ["php", "json"]
                },
                "automation": {
                  "purpose": "Cron tasks (repository audit, SSE verification, amendment discovery).",
                  "allowedExtensions": ["php"],
                  "requiredFiles": ["runCronTasks.php"]
                }
              }
            }
          }
        },
        "constraints": {
          "icon": 50,
          "text": "All files must serve a defined purpose in Codex doctrine. No duplicate logic, shadow rules, or ungoverned scripts may be introduced. A daily cron job must audit the repository, compare all files and folders against this Repository Standard, and report any non-Codex eccentricities, including unapproved directories, orphaned scripts, drifted files, or structural violations. Any discrepancy must be corrected or justified through a Codex amendment."
        },
        "notes": [
          "This standard supersedes all previous repository assumptions.",
          "Any deviation from this structure constitutes architectural drift and must be corrected immediately.",
          "Repository layout is considered part of the Skyesoft Constitution by extension.",
          "Cron-based validation ensures continuous structural integrity and prevents drift from compounding over time."
        ]
      },
      "versionGovernance": {
        "title": { "icon": 67, "text": "Version Governance Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-10",
        "description": "Defines Skyesoft’s official versioning rules, module lineage tracking, and system-wide metadata governance. All version declarations, including modules, Codex, SSE, dashboards, and APIs, must follow this standard.",
        "purpose": {
          "icon": 6,
          "text": "Ensure consistent, authoritative versioning across all Skyesoft components. Prevent silent behavioral drift, enforce semantic version structure, and maintain an auditable history of system evolution."
        },
        "governs": [
          "assets/data/versions.json",
          "api/getVersions.php",
          "system.versionContext"
        ],
        "dependsOn": ["constitution", "repositoryStandard"],
        "rules": [
          "All modules must declare version metadata inside versions.json.",
          "Module versions must follow semantic format: MAJOR.MINOR.PATCH.",
          "All version changes require Parliamentarian validation and Archivist recording.",
          "No module may silently update its version outside of an approved process.",
          "The system must expose a unified, read-only version endpoint via getVersions.php.",
          "Repository audits must verify version coherence between code, Codex, and versions.json.",
          "The Codex version must be listed as the root version element in versions.json.",
          "The SSE must include codexContext.version sourced exclusively from versions.json.",
          "Git commit hash must be read server-side via a Codex-approved script (e.g., scripts/git-version-check.php). This script must output: { \"latestCommitHash\": \"...\", \"latestCommitTime\": \"...\", \"latestCommitMessage\": \"...\" }. Cron tasks may log this data but cannot modify Codex doctrine.",
          "Any Git-triggered inference requires Parliamentarian review (Article V).",
          "Deployments must produce: { \"deployState\": \"live\", \"deployTime\": \"YYYY-MM-DDTHH:MM:SSZ\", \"commitHash\": \"...\", \"versions\": { ... } }. SSE must expose this under siteMeta.deploy. Confirmation via scripts/deploy-verify.php."
        ],
        "schema": {
          "codex": ["version", "lastUpdate", "notes"],
          "system": ["siteVersion", "deployTime", "commitHash", "state"],
          "modules": {
            "requiredFields": ["version", "lastModified", "notes", "sourceFile", "governedBy", "dependsOn", "changeNotes"],
            "optionalFields": []
          }
        },
        "apiRequirements": {
          "endpoint": "api/getVersions.php",
          "mustReturn": ["success", "data.codex", "data.system", "data.modules"],
          "mustNotReturn": ["filepaths outside Repository Standard", "debug info"]
        },
        "archivistDuties": [
          "Record all version increments.",
          "Index module lineage changes.",
          "Verify semantic versioning compliance.",
          "Maintain historical version logs."
        ],
        "parliamentarianDuties": [
          "Validate version standard compliance.",
          "Approve new modules before version assignment.",
          "Interpret conflicts between code and versions.json."
        ]
      },
      "skyebotModule": {
        "title": { "icon": 10, "text": "Skyebot Module Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-2",
        "description": "Defines the required behavior, interaction protocol, and operational constraints for Skyebot as Skyesoft’s primary conversational interface."
      },
      "aiIntegration": {
        "title": { "icon": 30, "text": "AI Integration Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-3",
        "description": "Specifies rules for contextual reasoning, use of Codex doctrine, and integration of SSE data within AI-driven responses."
      },
      "ragFramework": {
        "title": { "icon": 35, "text": "RAG Framework Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-4",
        "description": "Defines how Skyesoft connects Codex content, archived documents, and SSE data into a unified retrieval-augmented reasoning layer."
      },
      "semanticResponder": {
        "title": { "icon": 23, "text": "Semantic Responder Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-5",
        "description": "Governs prompt interpretation, intent routing, semantic clarity, and Codex-aligned reasoning without relying on keyword matching."
      },
      "chatHistoryArchitecture": {
        "title": { "icon": 16, "text": "Chat History Architecture Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-6",
        "description": "Defines the authoritative structure for message logging, recall logic, audit traceability, and temporal continuity."
      },
      "codeManagement": {
        "title": { "icon": 11, "text": "Code Management Standard" },
        "type": "standard",
        "tier": 2,
        "hierarchyOrder": "B-7",
        "description": "Specifies the rules by which Skyebot interacts with code files, ensuring read-only safety, structured diffs, and controlled version updates."
      }
    }
  },
  "modules": {
    "title": { "icon": 6, "text": "Skyesoft Operational Modules" },
    "version": "1.0.0",
    "preamble": {
      "title": { "icon": 6, "text": "Preamble — Purpose of the Modules Layer" },
      "text": "Tier 3 Modules are the working engines of Skyesoft. They take the rules of the Codex and turn them into real actions—reports, surveys, dashboards, calculations, and daily tools. A module does not debate policy or shape doctrine; its duty is simple: follow the Standards and deliver reliable results. By keeping each module focused on clear tasks, Skyesoft stays practical, organized, and useful to everyone who depends on it."
    },
    "purpose": {
      "icon": 6,
      "text": "Tier 3 Modules implement functional behavior such as permit reports, photo surveys, TIS, dynamic dashboards, and AI features. Modules must comply with Tier 2 Standards."
    },
    "items": {
      "timeIntervalStandards": {
        "title": { "icon": 52, "text": "TIS Module (Time Interval Standards)" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["sse", "documentStandards"],
        "description": "Interprets live SSE data to determine active time phases (before work, worktime, after work, weekend, holiday). Provides normalized time-state outputs for dashboards, documents, and AI reasoning.",
        "governedBy": ["documentStandards", "sse"],
        "outputs": [],
        "governs": []
      },
      "permitFeeReport": {
        "title": { "icon": 21, "text": "Permit Fee Report Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["documentStandards", "documentCatalog"],
        "governedBy": ["documentStandards", "documentCatalog"],
        "description": "Generates standardized Permit Fee Reports using Tier 2 formatting and repository placement rules.",
        "outputs": [],
        "governs": []
      },
      "photoSurvey": {
        "title": { "icon": 21, "text": "Photo Survey Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["documentStandards", "documentCatalog"],
        "governedBy": ["documentStandards", "documentCatalog"],
        "description": "Creates floating-header, floating-footer Photo Survey documents with strict section formatting.",
        "outputs": [],
        "governs": []
      },
      "dynamicDashboard": {
        "title": { "icon": 52, "text": "Dynamic Dashboard Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["sse"],
        "governedBy": ["sse"],
        "description": "Uses SSE state to provide real-time dashboard updates (time, weather, KPIs, intervals, and Codex context).",
        "outputs": [],
        "governs": []
      },
      "skyebotCore": {
        "title": { "icon": 10, "text": "Skyebot Core Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["aiIntegration", "semanticResponder", "chatHistoryArchitecture"],
        "governedBy": ["aiIntegration", "semanticResponder", "chatHistoryArchitecture"],
        "description": "Implements Skyebot’s core conversational logic, including intent routing, Codex-referenced reasoning, and SSE-aware response generation.",
        "outputs": [],
        "governs": []
      },
      "ragEngine": {
        "title": { "icon": 35, "text": "RAG Engine Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["ragFramework", "documentCatalog"],
        "governedBy": ["ragFramework", "documentCatalog"],
        "description": "Retrieves documents, Codex entries, and archived materials to support AI reasoning.",
        "outputs": [],
        "governs": []
      },
      "workOrderRequest": {
        "title": { "icon": 24, "text": "Work Order Request Module" },
        "type": "module",
        "tier": 3,
        "dependsOn": ["documentStandards", "documentCatalog"],
        "governedBy": ["documentStandards", "documentCatalog"],
        "description": "Generates Work Order Request documents with standardized headers, metadata, and structure.",
        "outputs": [],
        "governs": []
      },
      "systemAutomation": {
        "title": { "icon": 10, "text": "System Automation Module" },
        "type": "module",
        "tier": 3,
        "hierarchyOrder": "C-1",
        "description": "Implements scheduled scans, repository audits, document indexing, and Codex-governed housekeeping tasks.",
        "governedBy": [
          "repositoryStandard",
          "codeManagement",
          "documentStandards",
          "constitution.articles.automationLimits",
          "constitution.articles.automationReview"
        ],
        "dependsOn": [
          "repositoryStandard",
          "codeManagement"
        ],
        "tasks": {
          "dailyRepositoryAudit": {
            "schedule": "0 1 * * *",
            "description": "Perform a complete structural audit, checking for unapproved directories, orphaned files, drift, and Codex violations.",
            "output": "/reports/automation/dailyRepositoryAudit.json"
          },
          "documentIndexRefresh": {
            "schedule": "0 */6 * * *",
            "description": "Rebuild the documentIndex.json by scanning /documents for newly generated PDFs.",
            "output": "/assets/data/documentIndex.json"
          },
          "sseIntegrityCheck": {
            "schedule": "*/30 * * * *",
            "description": "Confirm SSE output conforms to the strict tier structure and ordering rules.",
            "output": "/reports/automation/sseIntegrity.json"
          },
          "proposedAmendmentDiscovery": {
            "schedule": "0 3 * * *",
            "description": "Scan for recurring inconsistencies or emerging structural patterns and publish suggested proposals. These suggestions have no authority unless advanced by a human.",
            "output": "/reports/automation/proposals.json"
          }
        }
      }
    }
  }
}